
stages:
- build
# - deploy

variables:
  GCP_PROJECT_NAME: moss-work
  GCP_REGION: europe-west1
  GOOGLE_CREDENTIALS: $BUILD_KEY
  NAMESPACE: mosstech
  APP_NAME: mosstech
  HOSTNAME: mosstech.io

build:
  stage: build
  image: registry.gitlab.com/mosstech/mw-platform/mw-builder
  variables:
    DOCKER_HOST: tcp://docker:2375/
    DOCKER_DRIVER: overlay2
  services:
  - docker:dind
  only:
  - master
  script: 
  - ./go build

# deploy:
#   stage: deploy
#   allow_failure: false
#   dependencies:
#   - build
#   image:
#   only:
#   - master
#   script:
#   - ./go deploy
